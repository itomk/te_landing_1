@use '../../inc/mixins/breakpoints' as queries;
@use '../../inc/mixins/patterns' as pat;

.history {
  --br-history-block: 1.2rem;
  --bw-history-block: 0.1rem;
  --fz-history-pretitle: 1rem;
  --fz-history-pretitle-accent: 2rem;
  --mh-history-block: 14.8rem;
  --padding-history-block-y: 2.2rem;
  --padding-history-block-x: 3.4rem;

  @include queries.md {
    --fz-history-pretitle: 1.5rem;
    --fz-history-pretitle-accent: 2.2rem;
    --mh-history-block: 13.4rem;
  }

  @include queries.lg {
    --br-history-block: 1rem;
    --fz-history-pretitle: 1.8rem;
    --fz-history-pretitle-accent: 2.4rem;
    --padding-history-block-y: 1.8rem;
  }

  @include queries.xl {
    --br-history-block: 1.6rem;
    --fz-history-pretitle: 2rem;
    --fz-history-pretitle-accent: 2.7rem;
    --mh-history-block: 15rem;
    --padding-history-block-y: 2.3rem;
  }

  @include queries.xxl {
    --br-history-block: 2rem;
    --fz-history-pretitle: 2.5rem;
    --fz-history-pretitle-accent: 3.3rem;
    --mh-history-block: 18.6rem;
    --padding-history-block-y: 3.2rem;
  }

  @include queries.xxxl {
    --br-history-block: 2.2rem;
    --fz-history-pretitle: 2.6rem;
    --fz-history-pretitle-accent: 3.5rem;
    --mh-history-block: 20rem;
    --padding-history-block-y: 3.5rem;
  }

  & {
    position: relative;
    z-index: 1;

    &>.container {
      position: relative;
      z-index: 2;
    }
  }

  &__bg {
    position: absolute;
    z-index: 1;
    display: none;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    opacity: 0.4;
    overflow: hidden;
    pointer-events: none;

    @include queries.lg {
      display: block;
    }

    &::before,
    &::after {
      position: absolute;
      content: '';
      z-index: 1;
      display: block;
      background-image: url('../images/promo-decor.svg');
      background-repeat: no-repeat;
      background-position: center center;
      background-size: 100% 100%;
      opacity: 0.7;
    }

    &::after {
      bottom: -4rem;
      left: 46.7%;
      width: 103.9rem;
      height: 72.4rem;
      transform: rotate(110deg);

      @include queries.xl {
        width: 73.9rem;
        height: 81.4rem;
        bottom: -8.2rem;
        left: 60.3%;
        transform: rotate(112deg);
      }

      @include queries.xxl {
        width: 91.5rem;
        height: 100.7rem;
        bottom: -11.2rem;
        left: 60.2%;
      }

      @include queries.xxxl {
        width: 98.7rem;
        height: 108.5rem;
        bottom: -11.5rem;
        left: 60.1%;
      }
    }

    &::before {
      bottom: -8.9rem;
      right: 62.3%;
      width: 57.7rem;
      height: 63.6rem;
      transform: rotate(-45deg);

      @include queries.xl {
        bottom: -9.9rem;
        right: 62.8%;
        width: 65rem;
        height: 71.6rem;
      }

      @include queries.xxl {
        bottom: -13.3rem;
        right: 63%;
        width: 80.3rem;
        height: 88.5rem;
      }

      @include queries.xxxl {
        bottom: -14.3rem;
        right: 63.1%;
        width: 86.6rem;
        height: 95.4rem;
      }
    }
  }

  &__heading {
    max-width: 24rem;

    @include queries.sm {
      max-width: none;
    }

    &--max {
      max-width: 30rem;

      @include queries.sm {
        max-width: none;
      }
    }
  }

  &__review-slider-wrapper,
  &__block {
    @include pat.not-last-margin;
  }

  &__block {
    position: relative;

    display: flex;
    align-items: center;
    justify-content: center;

    box-sizing: border-box;
    overflow: hidden;

    min-height: var(--mh-history-block);

    border: var(--bw-history-block) solid var(--color-base-border);
    background: var(--gradient-multi-horizontal);
    border-radius: var(--br-history-block);

    &-inner {
      position: relative;
      z-index: 3;

      width: 100%;

      padding: var(--padding-history-block-y) var(--padding-history-block-x);

      &::before,
      &::after {
        position: absolute;
        content: '';
        z-index: 1;
        display: block;
        background-image: url('../images/promo-decor.svg');
        background-repeat: no-repeat;
        background-position: center center;
        background-size: 100% 100%;
        aspect-ratio: 1 / 1;
      }

      &::before {
        top: -6.4rem;
        left: -6.7rem;
        width: 19.5rem;
        transform: rotate(160deg) scaleX(-1);
        opacity: 0.4;

        @include queries.md {
          top: -18rem;
          left: -12.8rem;
          width: 39.8rem;
        }

        @include queries.xl {
          top: -23rem;
          left: -12.8rem;
          width: 44.9rem;
          transform: rotate(170deg) scaleX(-1);
        }

        @include queries.xxl {
          width: 45.4rem;
        }

        @include queries.xxxl {
          width: 59.7rem;
          top: -30rem;
          left: -22.6rem;
          transform: rotate(164deg) scaleX(-1);
        }
      }

      &::after {
        top: -4rem;
        right: -12rem;
        width: 22.4rem;
        transform: rotate(254deg) skew(28deg, -30deg);
        opacity: 0.4;

        @include queries.md {
          top: -13rem;
          right: -13rem;
          width: 39.8rem;
          transform: rotate(54deg) scale(-1, -1);
        }

        @include queries.xl {
          width: 44.9rem;
          top: -14rem;
          right: -19rem;
          transform: rotate(48deg) scale(-1, -1);
        }

        @include queries.xxl {
          width: 45.4rem;
          top: -12rem;
          right: -16rem;
        }

        @include queries.xxxl {
          width: 48.8rem;
          top: -13rem;
          right: -18rem;
        }
      }
    }
  }

  &__decor {
    position: absolute;
    z-index: 4;
    inset: 0;

    &--max {
      inset: 0 -2rem;
    }

    &-pic {
      position: absolute;
      display: block;
      background-repeat: no-repeat;
      background-position: center center;
      background-size: cover;
      aspect-ratio: 1 / 1;
      overflow: hidden;
      border-radius: 50%;

      &--1 {
        top: 0.4rem;
        left: 5.7rem;
        width: 4.2rem;
        background-image: url('../images/history-01.jpg');

        @include queries.md {
          top: 0;
          left: 11.5rem;
          width: 6.5rem;
        }

        @include queries.xl {
          top: 0;
          left: 13.1rem;
          width: 7.3rem;
        }

        @include queries.xxl {
          top: 0;
          left: 16.2rem;
          width: 9rem;
        }

        @include queries.xxxl {
          top: 0;
          left: 16.8rem;
          width: 9.8rem;
        }
      }

      &--2 {
        width: 5.2rem;
        top: 5.1rem;
        left: 0.3rem;
        background-image: url('../images/history-02.jpg');

        @include queries.md {
          top: 3.2rem;
          left: 0.2rem;
          width: 7.7rem;
        }

        @include queries.lg {
          width: 9.7rem;
        }

        @include queries.xl {
          top: 3.6rem;
          left: 0.4rem;
          width: 10.9rem;
        }

        @include queries.xxl {
          top: 4.5rem;
          left: 0.5rem;
          width: 13.5rem;
        }

        @include queries.xxxl {
          top: 4.9rem;
          left: 0.4rem;
          width: 14.6rem;
        }
      }

      &--3 {
        width: 5rem;
        top: 10.3rem;
        left: 5.4rem;
        background-image: url('../images/history-03.jpg');

        @include queries.md {
          top: 7.4rem;
          left: 10rem;
          width: 7.3rem;
        }

        @include queries.lg {
          left: 15rem;
        }

        @include queries.xl {
          top: 8.3rem;
          left: 16.8rem;
          width: 8.2rem;
        }

        @include queries.xxl {
          top: 10.2rem;
          left: 20.8rem;
          width: 10.1rem;
        }

        @include queries.xxxl {
          top: 11.1rem;
          left: 22.5rem;
          width: 10.95rem;
        }
      }

      &--4 {
        width: 4.4rem;
        top: 0.1rem;
        right: 4.9rem;
        background-image: url('../images/history-04.jpg');

        @include queries.md {
          top: 3.5rem;
          right: 11rem;
          width: 6.6rem;
        }

        @include queries.lg {
          right: 14rem;
          width: 8.1rem;
        }

        @include queries.xl {
          top: 3.9rem;
          right: 15.8rem;
          width: 9.1rem;
        }

        @include queries.xxl {
          top: 4.8rem;
          right: 19.3rem;
          width: 11.3rem;
        }

        @include queries.xxxl {
          top: 5.2rem;
          right: 21.2rem;
          width: 12.1rem;
        }
      }

      &--5 {
        width: 5.1rem;
        top: 4.8rem;
        right: 0.5rem;
        background-image: url('../images/history-05.jpg');

        @include queries.md {
          top: 0;
          right: 5.4rem;
          width: 5.7rem;
        }

        @include queries.xl {
          top: 0;
          right: 6.1rem;
          width: 6.4rem;
        }

        @include queries.xxl {
          top: 0.1rem;
          right: 7.2rem;
          width: 8rem;
        }

        @include queries.xxxl {
          top: 0.1rem;
          right: 8.2rem;
          width: 8.6rem;
        }
      }

      &--6 {
        width: 4.7rem;
        top: 10.5rem;
        right: 5rem;
        background-image: url('../images/history-06.jpg');

        @include queries.md {
          top: 5.8rem;
          right: -1.1rem;
          width: 7rem;
        }

        @include queries.lg {
          width: 8.7rem;
        }

        @include queries.xl {
          top: 6.5rem;
          right: -1.3rem;
          width: 9.9rem;
        }

        @include queries.xxl {
          top: 8.1rem;
          right: -1.8rem;
          width: 12.2rem;
        }

        @include queries.xxxl {
          top: 8.7rem;
          right: -1.6rem;
          width: 13.1rem;
        }
      }
    }
  }

  &__pretitle {
    position: relative;
    z-index: 3;

    max-width: 29rem;

    font-weight: 600;
    font-size: var(--fz-history-pretitle);
    line-height: calc(12 / 10);

    text-align: center;
    margin: 0 auto;

    @include queries.md {
      max-width: 60rem;
    }

    @include queries.xxl {
      max-width: 75rem;
    }

    &-accent {
      display: block;

      font-size: var(--fz-history-pretitle-accent);
      line-height: calc(24 / 20);
      color: var(--color-base);

      margin-top: 0.328rem;

      @include queries.md {
        margin-top: 0.5rem;
      }

      @include queries.lg {
        margin-top: 0.7rem;
      }

      @include queries.xl {
        margin-top: 0.788rem;
      }

      @include queries.xxl {
        margin-top: 1rem;
      }
    }
  }
}
